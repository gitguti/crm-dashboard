import Head from "next/head";
import { Flex, Divider, HStack, Center } from "@chakra-ui/react";
import { useState } from "react";
import { Sidebar } from "../components/Sidebar";
import { TaskBadge } from "../components/TaskBadge";
import { UserBadge } from "../components/UserBadge";
import { TimeTrackingCollapse } from "@/components/TimeTrackingCollapse";
import { TaskDescription } from "@/components/TaskDescription";
import { TaskDescriptionResume } from "@/components/TaskDescriptionResume";
import { SearchFilter } from "@/components/SearchFilter";
import { Stat } from "@/components/Stat";
import { TaskList } from "@/components/TaskList";

export default function Home() {
  const [collapse, setCollapse] = useState({ index: null, state: false });
  const [taskSelect, setTaskSelect] = useState({});
  return (
    <>
      <Head>
        <title>Project CRM</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Flex h="100vh" flexDirection="row" overflow="hidden" maxWidth="2000px">
        <Flex
          as="aside"
          w="full"
          h="full"
          maxW={collapse.state ? 350 : 100}
          bg="white"
          alignItems="start"
          flexDirection="column"
          transition="ease-in-out .2s"
        >
          <Sidebar setCollapse={setCollapse} collapse={collapse} />
        </Flex>
        <Flex as="main" w="full" h="full" bg="white">
          {/* Starts second column */}
          <Flex
            w="80%"
            p="2%"
            flexDirection="column"
            overflow="auto"
            minH="100vh"
            backgroundColor="neutrals.light.100"
            position="relative"
          >
            <SearchFilter />
            <Divider mt={5} />
            <Flex gap={8}>
              <Stat
                symbol="h"
                concept="Yours & total time"
                number="03:09"
                detail="(05:21)"
                badgeColor="brand.secondary.default"
              />
              <Stat
                symbol="$"
                concept="Yours & total earnings"
                number="1,695.00"
                detail="(4,695.00)"
                badgeColor="semantic.success.green"
              />
              <Stat
                symbol="%"
                concept="Project progress"
                number="34%"
                detail="(34/100)"
                badgeColor="brand.primary.default"
              />
            </Flex>
            <TaskList setTaskSelect={setTaskSelect} />
          </Flex>
          <Flex
            w="20%"
            p="1%"
            flexDirection="column"
            overflow="auto"
            minH="100vh"
            bg="neutrals.light.100"
          >
            <Flex justifyContent="space-between">
              <TaskBadge />
              <Center>
                <Divider orientation="vertical" height="20px" />
              </Center>
              <UserBadge
                username="Kolin F."
                role="User"
                showDropdown={true}
                avatarPosition="right"
                avatarSize="sm"
                roleFontWeight="bold"
              />{" "}
            </Flex>
            <TimeTrackingCollapse taskSelect={taskSelect} />
            <HStack mt={0}>
              <TaskDescription />
            </HStack>

            <TaskDescriptionResume />
          </Flex>
        </Flex>
      </Flex>
    </>
  );
}
